<!DOCTYPE html>
<html>
<head>
  <title>Punkte auf PNG festlegen</title>
  <style>
    #canvas {
      border: 1px solid black;
      cursor: crosshair;
    }
  </style>
</head>
<body>
<canvas id="canvas" width="1588px" height="1123px"></canvas>
<div class="content">
  <h1>Stockwerk 1</h1>
  <!-- Hier wird deine Grundriss.svg eingebunden -->

</div>
<script>
  // Initialisierung des Canvas und Laden des PNG-Bildes
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const image = new Image();
  image.width=1
  image.height=100%;
  image.src = '/static/img/MULLER7_2014_03_1OG-KBT_Buro.png';

  // Variablen zur Verfolgung der Punkte
  const points = [];

  // Funktion zur Zeichnung der Punkte auf dem Canvas
  function drawPoints() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(image, 0, 0);
    ctx.fillStyle = 'red';
    points.forEach(point => {
      ctx.beginPath();
      ctx.arc(point.x, point.y, 5, 0, 2 * Math.PI);
      ctx.fill();
    });
  }

  // Funktion zur Behandlung des Klick-Ereignisses
  function handleClick(event) {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;
    points.push({ x, y });
    drawPoints();
    sendPointsToBackend();
  }

  // Funktion zum Senden der Punkte an das Backend
  function sendPointsToBackend() {
    // Hier kannst du den Code hinzufügen, um die Punkte an dein Backend zu senden.
    // Du kannst eine AJAX-Anfrage (z. B. mit der fetch-API) verwenden, um die Daten zu übertragen.
    // Die Punkte sind im "points" Array gespeichert und können in das gewünschte Format umgewandelt werden,
    // bevor sie an das Backend gesendet werden.
  }

  // Ereignislistener für Klick-Ereignisse
  canvas.addEventListener('click', handleClick);

  // Laden des Bildes und Zeichnen der Punkte
  image.onload = function () {
    drawPoints();
  };
</script>
</body>
</html>
